<!DOCTYPE html>
<html><head>

<style>
html, body { height: 100%; font-family: Sans-Serif; }
h1         { line-height: 2; }
.dist      { line-height: 4; }

body {
  background: linear-gradient(to bottom, #222288, #6666BB 50%, #222288);
  text-align: center;
  color: white;
}

ul {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 40ex;
  padding: 10px;
  text-align: left;
}
</style>

<script>
function redirectWithDelay(seconds) {
  var el = document.getElementById('delayCount');
  if(el) {
    el.innerText = "" + seconds;
  }
  if(seconds > 0) {
    seconds--;
    window.setTimeout('redirectWithDelay(' + seconds + ')', 1000)
  } else {
    showLoading();
    window.location.replace('JITSI_REDIRECT');
  }
}

function setDontBother() {
  localStorage.setItem("DontBotherTimestamp", Date.now());
}

function showLoading() {
  var el = document.getElementById('heading');
  if(el) {
    el.innerHtml = '';
    el.textContent = 'Loading...';
  }
  var el = document.getElementById('info');
  if(el) {
    el.innerHtml = '';
    el.textContent = '';
  }
}
</script>

</head><body>

<h1 id="heading">Jitsi-Usage Information</h1>

<div id="info">
<ul>
  <li>Use Jitsi to communicate with others</li>
  <li>Be nice to others</li>
  <li>Use it if you want to do Screen-Sharing</li>
  <li>Don't use the Camera if you are tired because others will notice</li>
</ul>

<div class="dist conf">
  <button type="button" onclick="redirectWithDelay(0)">Confirm</button>
</div>
<div class="dist conf">
  <button type="button" onclick="setDontBother(); redirectWithDelay(0);">Confirm and don't bother me for some days</button>
</div>
<p class="dist">...automatically skipping in <span id="delayCount"></span> seconds...</p>
</div>

<script>
  DONT_BOTHER_TIME = 1000 * 60 * 3; /minutes/
  dbTime = localStorage.getItem("DontBotherTimestamp");
  timeDiff = Date.now() - dbTime;

  if(timeDiff < DONT_BOTHER_TIME) {
    redirectWithDelay(0);
  } else {
    redirectWithDelay(20);
  }
</script>

</body></html>
